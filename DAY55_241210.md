# 내배캠 55일차 TIL

### Q. Dockerfile VS Docker Compose

### Q. SPRING 앱이 무엇인가


## Docker Compose
* YAML 파일
  * 컴퓨터가 읽을 수 있는 설정 파일
  * 사람이 읽기도 쉬운 텍스트 형식
    * **키-값 쌍** - `(키:값)`
    * **리스트** - `값1, 값2, 값3, ...`
    * **딕셔너리** - `{}`
    * **bool 값** - true, false, yes, no
    * **문자열** - `""`
  * YAML Ain't Markup Language
  * **들여쓰기 중요**
    * [들여쓰기 검사 사이트](https://www.yamllint.com/)



## 도커 모니터링
: 컨테이너의 성능, 사용중인 자원, 네트워크 사용량 등을 확인해 컨테이너가 문제 없이 잘 돌아가는지 확인할 수 있음

### 도커 모니터링 도구
#### docker stats
: CPU 사용률, 메모리 사용률, 네트워크 I/O, 디스크 I/O, 프로세스 ID 등 기본적인 상태 확인

<details>
<summary><b>docker stats 예제</b></summary>
<div markdown="1">

```bash
# 현재 사용중인 모든 컨테이너의 상태 보기
❯ docker stats
CONTAINER ID   NAME      CPU %     MEM USAGE / LIMIT   MEM %     NET I/O   BLOCK I/O   PIDS
```
* `CPU %` - CPU 사용률
* `MEM USAGE / LIMIT` - 메모리 사용량/최대
* `MEM %` - 메모리 사용률
* `NET I/O` - 네트워크 I/O
* `BLOCK I/O` - 디스크 I/O
* `PIDS` - 프로세스 ID

```bash
# 특정 컨테이너 상태만 보기
❯ docker stats <CONTAINER_ID>
```
![](/img/241210_docker_stats.png)
</details>
</div>

#### htop
: 리눅스 시스템을 모니터링하는데 사용되는 강력한 도구
* **실시간 모니터링** - CPU, 메모리, 스왑 사용량
* **프로세스 관리** - 실행중인 프로레스 확인, 종료 가능
* **사용자 친화적 인터페이스**

<details>
<summary><b>htop 예제</b></summary>
<div markdown="1">

```bash
# htop 으로 확인하기 위해 ubuntu:22.04 컨테이너 실행
❯ docker run --name test-tools -ti -d ubuntu:22.04

# docker 로 들어가서
❯ docker exec -ti test-tools /bin/bash
# htop 설치
❯ apt update; apt upgrade -y; apt install htop -y;
# htop 실행
❯ htop
# htop 종료
❯ exit
```

![](/img/241210_htop.png)
* 컨테이너 실행 및 htop 다운로드 - 1


![](/img/241210_htop_1.png)
* htop 다운로드 - 2

![](/img/241210_htop_info.png)
* htop 이 실행된 모습 순서대로,
1. CPU CORE
2. 메모리 사용량
3. 스왑 사용량
4. 도커 컨테이너 프로세스 확인

* `F10` - htop 종료 후, 
* `exit` 명령어 입력해 종료

</details>
</div>

#### df
: disk free, 리눅스 시스템 전체의 **디스크 사용량** 확인
<details>
<summary><b>df 예제</b></summary>
<div markdown="1">

```bash
# docker 로 들어가서
❯ docker exec -ti test-tools /bin/bash

# df 실행
❯ df -h

# 종료
❯ exit
```
* `-h`옵션 - 사람이 읽기 쉬운 형태로 나옴
</div>
</details>

#### du
: **디렉토리 별로 사용 공간**을 나타내 줌
<details>
<summary><b>du 예제</b></summary>
<div markdown="1">

```bash
# docker 로 들어가서
❯ docker exec -ti test-tools /bin/bash

# 현재 디렉토리의 총 디스크 사용량을 GB 단위로 보여줌
❯ du -sh

# 현재 디렉토리 한 단계 아래 디렉토리 까지만 사용량 보여줌
❯ du -h --max-depth=1

# 종료
# docker 로 들어가서
❯ exit
```
</details>
</div>